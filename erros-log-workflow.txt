root@srv649924:~# # 1. Testar endpoint específico diretamente no backend:
docker exec backend-prod curl -s http://localhost:8080/rest/v1/resultados/publico/ultimo/09

# 2. Listar endpoints disponíveis no backend:
docker exec backend-prod curl -s http://localhost:8080/actuator/mappings | grep -A5 -B5 "resultados"

# 3. Testar conectividade do Traefik para o backend:
docker exec conexao-traefik wget -qO- --timeout=5 http://backend-prod:8080/actuator/health

# 4. Verificar logs do Traefik para erros de roteamento:
docker logs conexao-traefik --tail=20 | grep -i error

# 5. Testar rota diretamente via Traefik (interno):
docker exec conexao-traefik wget -qO- --timeout=5 http://backend-prod:8080/rest/v1/resultados/publico/ultimo/rio
{"error":"unauthorized","message":"Acesso não autorizado"}{"status":"UP","groups":["liveness","readiness"],"components":{"armazenamento":{"status":"UP","details":{"espacoLivreBytes":67875880960,"arquivoLogAcessivel":true,"espacoTotalBytes":102888095744,"percentualLivre":65.9705872376963}},"azureKeyVault":{"status":"UP","details":{"endpoint":"http***************************************net/","authentication":"DefaultAzureCredential","compliance":"SOC2-CC6.1, ISO27001-A.10.1.1","last_check":"2025-08-16T23:29:26.955967033Z"}},"azureKeyVaultHealth":{"status":"UP","details":{"status":"Azure Key Vault conectado","mode":"azure-hybrid","endpoint":"***masked***"}},"bancoDados":{"status":"UP","details":{"status":"Health check com erro - sistema funcional","warning":"StatementCallback; bad SQL grammar [SELECT pg_database_size(current_database())]","mode":"fallback-graceful"}},"db":{"status":"UP","details":{"database":"MySQL","validationQuery":"isValid()"}},"diskSpace":{"status":"UP","details":{"total":102888095744,"free":67859103744,"threshold":10485760,"path":"/app/.","exists":true}},"keyVaultSecret":{"status":"UP"},"livenessState":{"status":"UP"},"performance":{"status":"UP","details":{"memory_usage_percent":"15.52%","max_memory_mb":1024,"used_memory_mb":158,"available_processors":2,"compliance":"SOC2-CC7.1, ISO27001-A.12.1.3","sla_threshold":"< 80% memory usage"}},"ping":{"status":"UP"},"readinessState":{"status":"UP"},"securityCompliance":{"status":"UP","details":{"oauth2_enabled":true,"security_headers":true,"password_encoding":"BCrypt-12","jwt_algorithm":"RS256","https_enforced":true,"last_security_scan":"2025-01-08T00:00:00Z","compliance_standards":"SOC2, ISO27001, PCI-DSS","cors_configured":true}},"servicoAzureConsolidado":{"status":"UP","details":{"ultima-verificacao":"2025-08-16T20:24:45.430204092","jwt-keys-status":"gerenciadas-localmente","conectividade":true,"total-secrets":19,"client-version":"Spring Cloud Azure","modo":"azure-hybrid","status":"Azure Key Vault conectado"}},"ssl":{"status":"UP","details":{"validChains":[],"invalidChains":[]}},"verificadorInicializacaoRobusta":{"status":"UP","details":{"status":"Sistema funcional com warnings","mode":"degraded-graceful","timestamp":"2025-08-14T09:31:33.518995292","warnings_count":4,"fallback_services_count":0,"warnings_list":["Erro ao verificar bean 'passwordEncoder': Cannot invoke \"org.springframework.context.ApplicationContext.containsBean(String)\" because \"this.applicationContext\" is null","Erro ao verificar bean 'codificadorJwt': Cannot invoke \"org.springframework.context.ApplicationContext.containsBean(String)\" because \"this.applicationContext\" is null","Erro ao verificar bean 'decodificadorJwt': Cannot invoke \"org.springframework.context.ApplicationContext.containsBean(String)\" because \"this.applicationContext\" is null","Erro ao verificar configurações: Cannot invoke \"org.springframework.context.ApplicationContext.getEnvironment()\" because \"this.applicationContext\" is null"],"fallback_list":[],"info":"Sistema continua operacional com fallbacks ativos"}}}}wget: server returned error: HTTP/1.1 401
root@srv649924:~# docker exec backend-prod curl -s http://localhost:8080/rest/v1/resultados/publico/ultimo/09
{"error":"unauthorized","message":"Acesso não autorizado"}root@srv649924:~# docker exec backend-prod curl -s http://localhost:8080/rest/v1/resultados/publico/ultimo/09        docker exec backend-prod curl -s http://localhost:8080/actuator/mappings | grep -A5 -B5 "resultados"
root@srv649924:~# docker exec conexao-traefik wget -qO- --timeout=5 http://backend-prod:8080/actuator/health
{"status":"UP","groups":["liveness","readiness"],"components":{"armazenamento":{"status":"UP","details":{"espacoLivreBytes":67875831808,"arquivoLogAcessivel":true,"espacoTotalBytes":102888095744,"percentualLivre":65.97053946540578}},"azureKeyVault":{"status":"UP","details":{"endpoint":"http***************************************net/","authentication":"DefaultAzureCredential","compliance":"SOC2-CC6.1, ISO27001-A.10.1.1","last_check":"2025-08-16T23:30:30.953075666Z"}},"azureKeyVaultHealth":{"status":"UP","details":{"status":"Azure Key Vault conectado","mode":"azure-hybrid","endpoint":"***masked***"}},"bancoDados":{"status":"UP","details":{"status":"Health check com erro - sistema funcional","warning":"StatementCallback; bad SQL grammar [SELECT pg_database_size(current_database())]","mode":"fallback-graceful"}},"db":{"status":"UP","details":{"database":"MySQL","validationQuery":"isValid()"}},"diskSpace":{"status":"UP","details":{"total":102888095744,"free":67859054592,"threshold":10485760,"path":"/app/.","exists":true}},"keyVaultSecret":{"status":"UP"},"livenessState":{"status":"UP"},"performance":{"status":"UP","details":{"memory_usage_percent":"15.77%","max_memory_mb":1024,"used_memory_mb":161,"available_processors":2,"compliance":"SOC2-CC7.1, ISO27001-A.12.1.3","sla_threshold":"< 80% memory usage"}},"ping":{"status":"UP"},"readinessState":{"status":"UP"},"securityCompliance":{"status":"UP","details":{"oauth2_enabled":true,"security_headers":true,"password_encoding":"BCrypt-12","jwt_algorithm":"RS256","https_enforced":true,"last_security_scan":"2025-01-08T00:00:00Z","compliance_standards":"SOC2, ISO27001, PCI-DSS","cors_configured":true}},"servicoAzureConsolidado":{"status":"UP","details":{"ultima-verificacao":"2025-08-16T20:29:50.449535172","jwt-keys-status":"gerenciadas-localmente","conectividade":true,"total-secrets":19,"client-version":"Spring Cloud Azure","modo":"azure-hybrid","status":"Azure Key Vault conectado"}},"ssl":{"status":"UP","details":{"validChains":[],"invalidChains":[]}},"verificadorInicializacaoRobusta":{"status":"UP","details":{"status":"Sistema funcional com warnings","mode":"degraded-graceful","timestamp":"2025-08-14T09:31:33.518995292","warnings_count":4,"fallback_services_count":0,"warnings_list":["Erro ao verificar bean 'passwordEncoder': Cannot invoke \"org.springframework.context.ApplicationContext.containsBean(String)\" because \"this.applicationContext\" is null","Erro ao verificar bean 'codificadorJwt': Cannot invoke \"org.springframework.context.ApplicationContext.containsBean(String)\" because \"this.applicationContext\" is null","Erro ao verificar bean 'decodificadorJwt': Cannot invoke \"org.springframework.context.ApplicationContext.containsBean(String)\" because \"this.applicationContext\" is null","Erro ao verificar configurações: Cannot invoke \"org.springframework.context.ApplicationContext.getEnvironment()\" because \"this.applicationContext\" is null"],"fallback_list":[],"info":"Sistema continua operacional cdocker logs conexao-traefik --tail=20 | grep -i errorhealth
root@srv649924:~# docker exec conexao-traefik wget -qO- --timeout=5 http://backend-prod:8080/rest/v1/resultados/publico/ultimo/federal
wget: server returned error: HTTP/1.1 401
root@srv649924:~#