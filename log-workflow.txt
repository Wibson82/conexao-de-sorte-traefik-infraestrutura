Current runner version: '2.327.1'
Runner Image Provisioner
Operating System
Runner Image
GITHUB_TOKEN Permissions
Secret source: Actions
Prepare workflow directory
Prepare all required actions
Getting action download info
Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
Download action repository 'docker/setup-buildx-action@v3' (SHA:e468171a9de216ec08956ac3ada2f0791b6bd435)
Download action repository 'actions/cache@v4' (SHA:0400d5f644dc74513175e3cd8d07132dd4860809)
Complete job name: ✅ Validação e Testes
1s
Run actions/checkout@v4
Syncing repository: Wibson82/conexao-traefik-infrastructure
Getting Git version info
Temporarily overriding HOME='/home/runner/work/_temp/646ff660-7d9e-4f0a-8711-a950478b9ee5' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
Deleting the contents of '/home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
/usr/bin/git sparse-checkout disable
/usr/bin/git config --local --unset-all extensions.worktreeConfig
Checking out the ref
/usr/bin/git log -1 --format=%H
356670cfeb29827cc139b0c905e83bfb3518ee02
10s
Run docker/setup-buildx-action@v3
Docker info
Buildx version
Inspecting default docker context
Creating a new builder instance
Booting builder
Inspect builder
BuildKit version
0s
Run actions/cache@v4
Cache not found for input keys: Linux-buildx-356670cfeb29827cc139b0c905e83bfb3518ee02, Linux-buildx-
4s
Run python3 -m pip install yamllint
Defaulting to user installation because normal site-packages is not writeable
Collecting yamllint
  Downloading yamllint-1.37.1-py3-none-any.whl.metadata (4.3 kB)
Collecting pathspec>=0.5.3 (from yamllint)
  Downloading pathspec-0.12.1-py3-none-any.whl.metadata (21 kB)
Requirement already satisfied: pyyaml in /usr/lib/python3/dist-packages (from yamllint) (6.0.1)
Downloading yamllint-1.37.1-py3-none-any.whl (68 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 68.8/68.8 kB 8.8 MB/s eta 0:00:00
Downloading pathspec-0.12.1-py3-none-any.whl (31 kB)
Installing collected packages: pathspec, yamllint
Successfully installed pathspec-0.12.1 yamllint-1.37.1
./monitoring/prometheus.yml

./config/dynamic/services.yml

./config/dynamic/middlewares.yml

./config/traefik.yml

./backup-roteamento/backend-docker-compose.prod.yml

./backup-roteamento/backend-docker-compose.dev.yml

./backup-roteamento/frontend-docker-compose.yml

./docker-compose.override.yml

./dynamic/services.yml

./dynamic/middlewares.yml

./.github/workflows/main.yml

✅ Validação YAML concluída (warnings ignorados)
0s
Run echo "� Validando sintaxe dos arquivos de configuração Traefik..."
� Validando sintaxe dos arquivos de configuração Traefik...
✅ config/traefik.yml: Sintaxe YAML válida
✅ config/dynamic/middlewares.yml: Sintaxe YAML válida
✅ config/dynamic/services.yml: Sintaxe YAML válida
✅ Validação de configuração Traefik concluída
0s
Run docker compose config
name: conexao-traefik-infrastructure
services:
  grafana:
    container_name: conexao-grafana-traefik
    environment:
      GF_SECURITY_ADMIN_PASSWORD: admin123
      GF_USERS_ALLOW_SIGN_UP: "false"
    image: grafana/grafana:latest
    labels:
      com.conexaodesorte.component: grafana
      com.conexaodesorte.environment: production
      com.conexaodesorte.service: monitoring
      com.conexaodesorte.version: latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 3000
        published: "3001"
        protocol: tcp
    restart: unless-stopped
    volumes:
      - type: volume
        source: grafana_data
        target: /var/lib/grafana
        volume: {}
      - type: bind
        source: /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure/monitoring/grafana-dashboard.json
        target: /etc/grafana/provisioning/dashboards/traefik.json
        read_only: true
        bind:
          create_host_path: true
  prometheus:
    command:
      - --config.file=/etc/prometheus/prometheus.yml
      - --storage.tsdb.path=/prometheus
      - --web.console.libraries=/etc/prometheus/console_libraries
      - --web.console.templates=/etc/prometheus/consoles
      - --storage.tsdb.retention.time=200h
      - --web.enable-lifecycle
    container_name: conexao-prometheus-traefik
    image: prom/prometheus:latest
    labels:
      com.conexaodesorte.component: prometheus
      com.conexaodesorte.environment: production
      com.conexaodesorte.service: monitoring
      com.conexaodesorte.version: latest
    networks:
      monitoring: null
    ports:
      - mode: ingress
        target: 9090
        published: "9090"
        protocol: tcp
    restart: unless-stopped
    volumes:
      - type: bind
        source: /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure/monitoring/prometheus.yml
        target: /etc/prometheus/prometheus.yml
        read_only: true
        bind:
          create_host_path: true
      - type: volume
        source: prometheus_data
        target: /prometheus
        volume: {}
  traefik:
    container_name: conexao-traefik
    deploy:
      resources:
        limits:
          cpus: 0.5
          memory: "536870912"
        reservations:
          cpus: 0.1
          memory: "134217728"
      restart_policy:
        condition: on-failure
        max_attempts: 3
        window: 2m0s
    environment:
      ACME_EMAIL: admin@conexaodesorte.com.br
      DOMAIN: conexaodesorte.com.br
      TRAEFIK_LOG_LEVEL: INFO
    healthcheck:
      test:
        - CMD
        - traefik
        - healthcheck
        - --ping
      timeout: 10s
      interval: 30s
      retries: 3
      start_period: 40s
    image: traefik:v3.0
    labels:
      com.conexaodesorte.component: traefik
      com.conexaodesorte.environment: production
      com.conexaodesorte.service: proxy
      com.conexaodesorte.version: latest
    networks:
      conexao-network: null
      monitoring: null
    ports:
      - mode: ingress
        target: 80
        published: "80"
        protocol: tcp
      - mode: ingress
        target: 443
        published: "443"
        protocol: tcp
      - mode: ingress
        target: 8080
        published: "8090"
        protocol: tcp
    restart: unless-stopped
    volumes:
      - type: bind
        source: /var/run/docker.sock
        target: /var/run/docker.sock
        read_only: true
        bind:
          create_host_path: true
      - type: bind
        source: /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure/config/traefik.yml
        target: /etc/traefik/traefik.yml
        read_only: true
        bind:
          create_host_path: true
      - type: bind
        source: /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure/dynamic
        target: /etc/traefik/dynamic
        read_only: true
        bind:
          create_host_path: true
      - type: volume
        source: traefik_certs
        target: /certs
        volume: {}
      - type: volume
        source: traefik_logs
        target: /var/log/traefik
        volume: {}
networks:
  conexao-network:
    name: conexao-network
    external: true
  monitoring:
    name: conexao-monitoring
    driver: bridge
volumes:
  grafana_data:
    name: conexao-traefik-infrastructure_grafana_data
    driver: local
  prometheus_data:
    name: conexao-traefik-infrastructure_prometheus_data
    driver: local
  traefik_certs:
    name: conexao-traefik-infrastructure_traefik_certs
    driver: local
  traefik_logs:
    name: conexao-traefik-infrastructure_traefik_logs
    driver: local
x-deploy-defaults:
  restart_policy:
    condition: on-failure
    max_attempts: 3
    window: 120s
x-logging:
  driver: json-file
  options:
    max-file: "3"
    max-size: 10m
traefik
grafana
prometheus
12s
Run echo "� Testando conectividade básica do Traefik..."
� Testando conectividade básica do Traefik...
b2c7f9d1360426d3806bab2a3abe5031f56921fc7de88259b19b8d3e1f8dc63d
Unable to find image 'traefik:v3.0' locally
v3.0: Pulling from library/traefik
ec99f8b99825: Pulling fs layer
8168e2be9d20: Pulling fs layer
4c4266770910: Pulling fs layer
67e108beaf7a: Pulling fs layer
67e108beaf7a: Waiting
ec99f8b99825: Verifying Checksum
ec99f8b99825: Download complete
8168e2be9d20: Verifying Checksum
8168e2be9d20: Download complete
67e108beaf7a: Download complete
ec99f8b99825: Pull complete
4c4266770910: Verifying Checksum
4c4266770910: Download complete
8168e2be9d20: Pull complete
4c4266770910: Pull complete
67e108beaf7a: Pull complete
Digest: sha256:a208c74fd80a566d4ea376053bff73d31616d7af3f1465a7747b8b89ee34d97e
Status: Downloaded newer image for traefik:v3.0
3e60ccb1feda6ae0b04bec5209e84bbc827256112c558ac8b0650aead541bf6c
✅ Traefik iniciou com sucesso
traefik-test
traefik-test
traefik-test
✅ Teste de conectividade concluído
0s
Post job cleanup.
Warning: Path Validation Error: Path(s) specified in the action for caching do(es) not exist, hence no cache is being saved.
1s
Post job cleanup.
Removing builder
Cleaning up certificates
Post cache
0s
Post job cleanup.
/usr/bin/git version
git version 2.50.1
Temporarily overriding HOME='/home/runner/work/_temp/b91d6be3-2e29-4705-a397-12953f733b26' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
0s
Cleaning up orphan processes

Current runner version: '2.327.1'
Runner Image Provisioner
Operating System
Runner Image
GITHUB_TOKEN Permissions
Secret source: Actions
Prepare workflow directory
Prepare all required actions
Getting action download info
Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
Download action repository 'trufflesecurity/trufflehog@main' (SHA:72e4106a9cfbb2ec25aed0d1f5b08792d8af14b6)
Complete job name: � Verificações de Segurança
0s
Run actions/checkout@v4
Syncing repository: Wibson82/conexao-traefik-infrastructure
Getting Git version info
Temporarily overriding HOME='/home/runner/work/_temp/d392a729-0492-404c-a719-92b5555c1407' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
Deleting the contents of '/home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
/usr/bin/git sparse-checkout disable
/usr/bin/git config --local --unset-all extensions.worktreeConfig
Checking out the ref
/usr/bin/git log -1 --format=%H
356670cfeb29827cc139b0c905e83bfb3518ee02
5s
Run trufflesecurity/trufflehog@main
Run ##########################################
Unable to find image 'ghcr.io/trufflesecurity/trufflehog:latest' locally
latest: Pulling from trufflesecurity/trufflehog
9824c27679d3: Pulling fs layer
4aab64ccf39a: Pulling fs layer
4f4fb700ef54: Pulling fs layer
2727c6fd8e90: Pulling fs layer
61d3a9781423: Pulling fs layer
2727c6fd8e90: Waiting
61d3a9781423: Waiting
4f4fb700ef54: Verifying Checksum
4f4fb700ef54: Download complete
9824c27679d3: Verifying Checksum
9824c27679d3: Download complete
4aab64ccf39a: Download complete
61d3a9781423: Verifying Checksum
61d3a9781423: Download complete
9824c27679d3: Pull complete
2727c6fd8e90: Verifying Checksum
2727c6fd8e90: Download complete
4aab64ccf39a: Pull complete
4f4fb700ef54: Pull complete
2727c6fd8e90: Pull complete
61d3a9781423: Pull complete
Digest: sha256:214da7bcbf60f71db229bc5b6d790bf46eb1e8d068faa59838c1dba59738bc85
Status: Downloaded newer image for ghcr.io/trufflesecurity/trufflehog:latest
2025/08/17 00:44:10 [updater parent] run
2025/08/17 00:44:10 [updater parent] starting /usr/bin/trufflehog
2025/08/17 00:44:11 [updater child#1] run
2025/08/17 00:44:11 [updater child#1] start program
2025-08-17T00:44:11Z	info-2	trufflehog	trufflehog 3.90.5
���  TruffleHog. Unearth your secrets. ���

2025-08-17T00:44:11Z	info-2	trufflehog	starting scanner workers	{"count": 1}
2025-08-17T00:44:11Z	info-2	trufflehog	starting detector workers	{"count": 8}
2025-08-17T00:44:11Z	info-2	trufflehog	starting verificationOverlap workers	{"count": 1}
2025-08-17T00:44:11Z	info-2	trufflehog	starting notifier workers	{"count": 1}
2025-08-17T00:44:11Z	info-1	trufflehog	cloned repo	{"path": "/tmp/"}
2025-08-17T00:44:11Z	info-0	trufflehog	running source	{"source_manager_worker_id": "SUWQi", "with_units": true}
2025-08-17T00:44:11Z	info-2	trufflehog	enumerating source	{"source_manager_worker_id": "SUWQi"}
2025-08-17T00:44:11Z	info-0	trufflehog	scanning repo	{"source_manager_worker_id": "SUWQi", "unit_kind": "dir", "unit": "/tmp/", "repo": "https://github.com/Wibson82/conexao-traefik-infrastructure", "base": "6e43c9c637a57edb225f84937ff3c5b2c1e8aff4", "head": "356670cfeb29827cc139b0c905e83bfb3518ee02"}
2025-08-17T00:44:11Z	info-1	trufflehog	reached base commit	{"source_manager_worker_id": "SUWQi", "unit_kind": "dir", "unit": "/tmp/", "repo": "https://github.com/Wibson82/conexao-traefik-infrastructure", "commit": "6e43c9c637a57edb225f84937ff3c5b2c1e8aff4"}
2025-08-17T00:44:11Z	info-1	trufflehog	scanning staged changes	{"source_manager_worker_id": "SUWQi", "unit_kind": "dir", "unit": "/tmp/", "path": "/tmp/", "base": "6e43c9c637a57edb225f84937ff3c5b2c1e8aff4", "head": "356670cfeb29827cc139b0c905e83bfb3518ee02"}
2025-08-17T00:44:11Z	info-2	trufflehog	finished parsing git log.	{"source_manager_worker_id": "SUWQi", "unit_kind": "dir", "unit": "/tmp/", "total_log_size": 0}
2025-08-17T00:44:11Z	info-1	trufflehog	scanning git repo complete	{"source_manager_worker_id": "SUWQi", "unit_kind": "dir", "unit": "/tmp/", "repo": "https://github.com/Wibson82/conexao-traefik-infrastructure", "path": "/tmp/", "time_seconds": 0, "commits_scanned": 1}
2025-08-17T00:44:11Z	info-0	trufflehog	finished scanning	{"chunks": 7, "bytes": 1334, "verified_secrets": 0, "unverified_secrets": 0, "scan_duration": "11.970556ms", "trufflehog_version": "3.90.5", "verification_caching": {"Hits":0,"Misses":0,"HitsWasted":0,"AttemptsSaved":0,"VerificationTimeSpentMS":0}}
2025/08/17 00:44:11 [updater parent] prog exited with 0
18s
Run # Instalar Trivy
Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
Hit:2 http://azure.archive.ubuntu.com/ubuntu noble InRelease
Hit:6 https://packages.microsoft.com/repos/azure-cli noble InRelease
Get:3 http://azure.archive.ubuntu.com/ubuntu noble-updates InRelease [126 kB]
Get:7 https://packages.microsoft.com/ubuntu/24.04/prod noble InRelease [3600 B]
Get:4 http://azure.archive.ubuntu.com/ubuntu noble-backports InRelease [126 kB]
Get:5 http://azure.archive.ubuntu.com/ubuntu noble-security InRelease [126 kB]
Get:8 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 Packages [1325 kB]
Get:9 http://azure.archive.ubuntu.com/ubuntu noble-updates/main Translation-en [265 kB]
Get:10 http://azure.archive.ubuntu.com/ubuntu noble-updates/main amd64 Components [175 kB]
Get:11 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 Packages [1120 kB]
Get:12 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe Translation-en [287 kB]
Get:13 http://azure.archive.ubuntu.com/ubuntu noble-updates/universe amd64 Components [377 kB]
Get:14 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Packages [1672 kB]
Get:15 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted Translation-en [367 kB]
Get:16 http://azure.archive.ubuntu.com/ubuntu noble-updates/restricted amd64 Components [212 B]
Get:17 http://azure.archive.ubuntu.com/ubuntu noble-updates/multiverse amd64 Components [940 B]
Get:24 https://packages.microsoft.com/ubuntu/24.04/prod noble/main amd64 Packages [47.9 kB]
Get:18 http://azure.archive.ubuntu.com/ubuntu noble-backports/main amd64 Components [7084 B]
Get:25 https://packages.microsoft.com/ubuntu/24.04/prod noble/main arm64 Packages [33.0 kB]
Get:19 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Packages [30.2 kB]
Get:20 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe Translation-en [17.4 kB]
Get:21 http://azure.archive.ubuntu.com/ubuntu noble-backports/universe amd64 Components [19.2 kB]
Get:22 http://azure.archive.ubuntu.com/ubuntu noble-backports/restricted amd64 Components [216 B]
Get:23 http://azure.archive.ubuntu.com/ubuntu noble-backports/multiverse amd64 Components [212 B]
Get:26 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Packages [1060 kB]
Get:27 http://azure.archive.ubuntu.com/ubuntu noble-security/main Translation-en [184 kB]
Get:28 http://azure.archive.ubuntu.com/ubuntu noble-security/main amd64 Components [21.6 kB]
Get:29 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Packages [879 kB]
Get:30 http://azure.archive.ubuntu.com/ubuntu noble-security/universe Translation-en [194 kB]
Get:31 http://azure.archive.ubuntu.com/ubuntu noble-security/universe amd64 Components [52.3 kB]
Get:32 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Packages [1572 kB]
Get:33 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted Translation-en [346 kB]
Get:34 http://azure.archive.ubuntu.com/ubuntu noble-security/restricted amd64 Components [212 B]
Get:35 http://azure.archive.ubuntu.com/ubuntu noble-security/multiverse amd64 Components [208 B]
Fetched 10.4 MB in 1s (8135 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
wget is already the newest version (1.21.4-1ubuntu4.1).
apt-transport-https is already the newest version (2.8.3).
gnupg is already the newest version (2.4.4-2ubuntu17.3).
lsb-release is already the newest version (12.0-2).
0 upgraded, 0 newly installed, 0 to remove and 36 not upgraded.
Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead (see apt-key(8)).
OK
deb https://aquasecurity.github.io/trivy-repo/deb noble main
Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
Hit:2 http://azure.archive.ubuntu.com/ubuntu noble InRelease
Hit:6 https://packages.microsoft.com/repos/azure-cli noble InRelease
Hit:3 http://azure.archive.ubuntu.com/ubuntu noble-updates InRelease
Hit:4 http://azure.archive.ubuntu.com/ubuntu noble-backports InRelease
Hit:5 http://azure.archive.ubuntu.com/ubuntu noble-security InRelease
Hit:7 https://packages.microsoft.com/ubuntu/24.04/prod noble InRelease
Get:8 https://aquasecurity.github.io/trivy-repo/deb noble InRelease [3061 B]
Get:9 https://aquasecurity.github.io/trivy-repo/deb noble/main amd64 Packages [367 B]
Fetched 3428 B in 0s (7029 B/s)
Reading package lists...
W: https://aquasecurity.github.io/trivy-repo/deb/dists/noble/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
Reading package lists...
Building dependency tree...
Reading state information...
The following NEW packages will be installed:
  trivy
0 upgraded, 1 newly installed, 0 to remove and 36 not upgraded.
Need to get 46.1 MB of archives.
After this operation, 155 MB of additional disk space will be used.
Get:1 https://aquasecurity.github.io/trivy-repo/deb noble/main amd64 trivy amd64 0.65.0 [46.1 MB]
Fetched 46.1 MB in 0s (130 MB/s)
Selecting previously unselected package trivy.
(Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 219881 files and directories currently installed.)
Preparing to unpack .../trivy_0.65.0_amd64.deb ...
Unpacking trivy (0.65.0) ...
Setting up trivy (0.65.0) ...

Running kernel seems to be up-to-date.

Restarting services...

Service restarts being deferred:
 systemctl restart hosted-compute-agent.service

No containers need to be restarted.

No user sessions are running outdated binaries.

No VM guests are running outdated hypervisor (qemu) binaries on this host.
2025-08-16T21:44:24-03:00	INFO	[vulndb] Need to update DB
2025-08-16T21:44:24-03:00	INFO	[vulndb] Downloading vulnerability DB...
2025-08-16T21:44:24-03:00	INFO	[vulndb] Downloading artifact...	repo="mirror.gcr.io/aquasec/trivy-db:2"
15.47 MiB / 68.40 MiB [------------->_______________________________________________] 22.61% ? p/s ?55.76 MiB / 68.40 MiB [------------------------------------------------->___________] 81.53% ? p/s ?68.40 MiB / 68.40 MiB [----------------------------------------------------------->] 100.00% ? p/s ?68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 88.21 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 88.21 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 88.21 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 82.52 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 82.52 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 82.52 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 77.19 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [---------------------------------------------->] 100.00% 77.19 MiB p/s ETA 0s68.40 MiB / 68.40 MiB [-------------------------------------------------] 100.00% 31.31 MiB p/s 2.4s2025-08-16T21:44:27-03:00	INFO	[vulndb] Artifact successfully downloaded	repo="mirror.gcr.io/aquasec/trivy-db:2"
2025-08-16T21:44:27-03:00	INFO	[vuln] Vulnerability scanning is enabled
2025-08-16T21:44:27-03:00	INFO	[secret] Secret scanning is enabled
2025-08-16T21:44:27-03:00	INFO	[secret] If your scanning is slow, please try '--scanners vuln' to disable secret scanning
2025-08-16T21:44:27-03:00	INFO	[secret] Please see also https://trivy.dev/v0.65/docs/scanner/secret#recommendation for faster secret detection
2025-08-16T21:44:29-03:00	INFO	Detected OS	family="alpine" version="3.20.1"
2025-08-16T21:44:29-03:00	INFO	[alpine] Detecting vulnerabilities...	os_version="3.20" repository="3.20" pkg_num=16
2025-08-16T21:44:29-03:00	INFO	Number of language-specific files	num=1
2025-08-16T21:44:29-03:00	INFO	[gobinary] Detecting vulnerabilities...
2025-08-16T21:44:29-03:00	WARN	Using severities from other vendors for some vulnerabilities. Read https://trivy.dev/v0.65/docs/scanner/vulnerability#severity-selection for details.

Report Summary

┌──────────────────────────────┬──────────┬─────────────────┬─────────┐
│            Target            │   Type   │ Vulnerabilities │ Secrets │
├──────────────────────────────┼──────────┼─────────────────┼─────────┤
│ traefik:v3.0 (alpine 3.20.1) │  alpine  │        4        │    -    │
├──────────────────────────────┼──────────┼─────────────────┼─────────┤
│ usr/local/bin/traefik        │ gobinary │        8        │    -    │
└──────────────────────────────┴──────────┴─────────────────┴─────────┘
Legend:
- '-': Not scanned
- '0': Clean (no security findings detected)


For OSS Maintainers: VEX Notice
--------------------------------
If you're an OSS maintainer and Trivy has detected vulnerabilities in your project that you believe are not actually exploitable, consider issuing a VEX (Vulnerability Exploitability eXchange) statement.
VEX allows you to communicate the actual status of vulnerabilities in your project, improving security transparency and reducing false positives for your users.
Learn more and start using VEX: https://trivy.dev/v0.65/docs/supply-chain/vex/repo#publishing-vex-documents

To disable this notice, set the TRIVY_DISABLE_VEX_NOTICE environment variable.


traefik:v3.0 (alpine 3.20.1)
============================
Total: 4 (HIGH: 4, CRITICAL: 0)

┌────────────┬────────────────┬──────────┬────────┬───────────────────┬───────────────┬──────────────────────────────────────────────────────────┐
│  Library   │ Vulnerability  │ Severity │ Status │ Installed Version │ Fixed Version │                          Title                           │
├────────────┼────────────────┼──────────┼────────┼───────────────────┼───────────────┼──────────────────────────────────────────────────────────┤
│ libcrypto3 │ CVE-2024-12797 │ HIGH     │ fixed  │ 3.3.1-r0          │ 3.3.3-r0      │ openssl: RFC7250 handshakes with unauthenticated servers │
│            │                │          │        │                   │               │ don't abort as expected                                  │
│            │                │          │        │                   │               │ https://avd.aquasec.com/nvd/cve-2024-12797               │
│            ├────────────────┤          │        │                   ├───────────────┼──────────────────────────────────────────────────────────┤
│            │ CVE-2024-6119  │          │        │                   │ 3.3.2-r0      │ openssl: Possible denial of service in X.509 name checks │
│            │                │          │        │                   │               │ https://avd.aquasec.com/nvd/cve-2024-6119                │
├────────────┼────────────────┤          │        │                   ├───────────────┼──────────────────────────────────────────────────────────┤
│ libssl3    │ CVE-2024-12797 │          │        │                   │ 3.3.3-r0      │ openssl: RFC7250 handshakes with unauthenticated servers │
│            │                │          │        │                   │               │ don't abort as expected                                  │
│            │                │          │        │                   │               │ https://avd.aquasec.com/nvd/cve-2024-12797               │
│            ├────────────────┤          │        │                   ├───────────────┼──────────────────────────────────────────────────────────┤
│            │ CVE-2024-6119  │          │        │                   │ 3.3.2-r0      │ openssl: Possible denial of service in X.509 name checks │
│            │                │          │        │                   │               │ https://avd.aquasec.com/nvd/cve-2024-6119                │
└────────────┴────────────────┴──────────┴────────┴───────────────────┴───────────────┴──────────────────────────────────────────────────────────┘

usr/local/bin/traefik (gobinary)
================================
Total: 8 (HIGH: 6, CRITICAL: 2)

┌──────────────────────────────┬────────────────┬──────────┬────────┬──────────────────────┬─────────────────────────────────┬───────────────────────────────────────────────────────────┐
│           Library            │ Vulnerability  │ Severity │ Status │  Installed Version   │          Fixed Version          │                           Title                           │
├──────────────────────────────┼────────────────┼──────────┼────────┼──────────────────────┼─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│ github.com/docker/docker     │ CVE-2024-41110 │ CRITICAL │ fixed  │ v25.0.5+incompatible │ 23.0.15, 26.1.5, 27.1.1, 25.0.6 │ moby: Authz zero length regression                        │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2024-41110                │
├──────────────────────────────┼────────────────┼──────────┤        ├──────────────────────┼─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│ github.com/golang-jwt/jwt/v4 │ CVE-2025-30204 │ HIGH     │        │ v4.5.0               │ 4.5.2                           │ golang-jwt/jwt: jwt-go allows excessive memory allocation │
│                              │                │          │        │                      │                                 │ during header parsing                                     │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2025-30204                │
├──────────────────────────────┤                │          │        ├──────────────────────┼─────────────────────────────────┤                                                           │
│ github.com/golang-jwt/jwt/v5 │                │          │        │ v5.2.1               │ 5.2.2                           │                                                           │
│                              │                │          │        │                      │                                 │                                                           │
│                              │                │          │        │                      │                                 │                                                           │
├──────────────────────────────┼────────────────┼──────────┤        ├──────────────────────┼─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│ golang.org/x/crypto          │ CVE-2024-45337 │ CRITICAL │        │ v0.24.0              │ 0.31.0                          │ golang.org/x/crypto/ssh: Misuse of                        │
│                              │                │          │        │                      │                                 │ ServerConfig.PublicKeyCallback may cause authorization    │
│                              │                │          │        │                      │                                 │ bypass in golang.org/x/crypto                             │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2024-45337                │
│                              ├────────────────┼──────────┤        │                      ├─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│                              │ CVE-2025-22869 │ HIGH     │        │                      │ 0.35.0                          │ golang.org/x/crypto/ssh: Denial of Service in the Key     │
│                              │                │          │        │                      │                                 │ Exchange of golang.org/x/crypto/ssh                       │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2025-22869                │
├──────────────────────────────┼────────────────┤          │        ├──────────────────────┼─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│ golang.org/x/oauth2          │ CVE-2025-22868 │          │        │ v0.21.0              │ 0.27.0                          │ golang.org/x/oauth2/jws: Unexpected memory consumption    │
│                              │                │          │        │                      │                                 │ during token parsing in golang.org/x/oauth2/jws           │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2025-22868                │
├──────────────────────────────┼────────────────┤          │        ├──────────────────────┼─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│ stdlib                       │ CVE-2024-34156 │          │        │ v1.22.4              │ 1.22.7, 1.23.1                  │ encoding/gob: golang: Calling Decoder.Decode on a message │
│                              │                │          │        │                      │                                 │ which contains deeply nested structures...                │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2024-34156                │
│                              ├────────────────┤          │        │                      ├─────────────────────────────────┼───────────────────────────────────────────────────────────┤
│                              │ CVE-2025-47907 │          │        │                      │ 1.23.12, 1.24.6                 │ database/sql: Postgres Scan Race Condition                │
│                              │                │          │        │                      │                                 │ https://avd.aquasec.com/nvd/cve-2025-47907                │
└──────────────────────────────┴────────────────┴──────────┴────────┴──────────────────────┴─────────────────────────────────┴───────────────────────────────────────────────────────────┘
0s
Run echo "� Verificando configurações de segurança..."
� Verificando configurações de segurança...
✅ HTTPS configurado
✅ Let's Encrypt configurado
✅ Security headers configurados
✅ Rate limiting configurado
✅ Dashboard protegido
✅ TLS versão mínima configurada
✅ Logs de acesso habilitados
✅ Métricas habilitadas

� Score de Segurança: 8/8 (100%)
0s
Post job cleanup.
/usr/bin/git version
git version 2.50.1
Temporarily overriding HOME='/home/runner/work/_temp/8dc63d83-7ebc-49d8-abf3-f91c0cfe09aa' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
0s
Cleaning up orphan processes

Current runner version: '2.327.1'
Runner Image Provisioner
Operating System
Runner Image
GITHUB_TOKEN Permissions
Secret source: Actions
Prepare workflow directory
Prepare all required actions
Getting action download info
Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
Complete job name: � Backup Configurações
0s
Run actions/checkout@v4
Syncing repository: Wibson82/conexao-traefik-infrastructure
Getting Git version info
Temporarily overriding HOME='/home/runner/work/_temp/05ccd8a8-2c18-40ae-a350-b5e668ce8aab' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
Deleting the contents of '/home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
/usr/bin/git sparse-checkout disable
/usr/bin/git config --local --unset-all extensions.worktreeConfig
Checking out the ref
/usr/bin/git log -1 --format=%H
356670cfeb29827cc139b0c905e83bfb3518ee02
0s
Run TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
� Backup criado: backup_configs_20250816_214436.tar.gz
1s
Run actions/upload-artifact@v4
With the provided path, there will be 1 file uploaded
Artifact name is valid!
Root directory input is valid!
Beginning upload of artifact content to blob storage
Uploaded bytes 11117
Finished uploading artifact content to blob storage!
SHA256 digest of uploaded artifact zip is 9126f54959e320a2e02d6144b598e656c107a89de83453c7767c967b4964302b
Finalizing artifact upload
Artifact config-backup-356670cfeb29827cc139b0c905e83bfb3518ee02.zip successfully finalized. Artifact ID 3781174155
Artifact config-backup-356670cfeb29827cc139b0c905e83bfb3518ee02 has been successfully uploaded! Final size is 11117 bytes. Artifact ID is 3781174155
Artifact download URL: https://github.com/Wibson82/conexao-traefik-infrastructure/actions/runs/17014721118/artifacts/3781174155
1s
Post job cleanup.
/usr/bin/git version
git version 2.50.1
Temporarily overriding HOME='/home/runner/work/_temp/27991fb3-c03c-486b-a2e5-6ce5e4ab5c83' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
0s
Cleaning up orphan processes

Current runner version: '2.327.1'
Runner Image Provisioner
Operating System
Runner Image
GITHUB_TOKEN Permissions
Secret source: Actions
Prepare workflow directory
Prepare all required actions
Getting action download info
Download action repository 'actions/checkout@v4' (SHA:08eba0b27e820071cde6df949e0beb9ba4906955)
Download action repository 'actions/upload-artifact@v4' (SHA:ea165f8d65b6e75b540449e92b4886f43607fa02)
Complete job name: � Backup Configurações
0s
Run actions/checkout@v4
Syncing repository: Wibson82/conexao-traefik-infrastructure
Getting Git version info
Temporarily overriding HOME='/home/runner/work/_temp/05ccd8a8-2c18-40ae-a350-b5e668ce8aab' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
Deleting the contents of '/home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure'
Initializing the repository
Disabling automatic garbage collection
Setting up auth
Fetching the repository
Determining the checkout info
/usr/bin/git sparse-checkout disable
/usr/bin/git config --local --unset-all extensions.worktreeConfig
Checking out the ref
/usr/bin/git log -1 --format=%H
356670cfeb29827cc139b0c905e83bfb3518ee02
0s
Run TIMESTAMP=$(date +"%Y%m%d_%H%M%S")
� Backup criado: backup_configs_20250816_214436.tar.gz
1s
Run actions/upload-artifact@v4
With the provided path, there will be 1 file uploaded
Artifact name is valid!
Root directory input is valid!
Beginning upload of artifact content to blob storage
Uploaded bytes 11117
Finished uploading artifact content to blob storage!
SHA256 digest of uploaded artifact zip is 9126f54959e320a2e02d6144b598e656c107a89de83453c7767c967b4964302b
Finalizing artifact upload
Artifact config-backup-356670cfeb29827cc139b0c905e83bfb3518ee02.zip successfully finalized. Artifact ID 3781174155
Artifact config-backup-356670cfeb29827cc139b0c905e83bfb3518ee02 has been successfully uploaded! Final size is 11117 bytes. Artifact ID is 3781174155
Artifact download URL: https://github.com/Wibson82/conexao-traefik-infrastructure/actions/runs/17014721118/artifacts/3781174155
1s
Post job cleanup.
/usr/bin/git version
git version 2.50.1
Temporarily overriding HOME='/home/runner/work/_temp/27991fb3-c03c-486b-a2e5-6ce5e4ab5c83' before making global git config changes
Adding repository directory to the temporary git global config as a safe directory
/usr/bin/git config --global --add safe.directory /home/runner/work/conexao-traefik-infrastructure/conexao-traefik-infrastructure
/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
http.https://github.com/.extraheader
/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
0s
Cleaning up orphan processes


0s
Current runner version: '2.327.1'
Runner Image Provisioner
Operating System
Runner Image
GITHUB_TOKEN Permissions
Secret source: Actions
Prepare workflow directory
Prepare all required actions
Complete job name: � Relatório Final
0s
Run echo "� Relatório do Pipeline - $(date -u +%Y-%m-%dT%H:%M:%SZ)"
� Relatório do Pipeline - 2025-08-17T00:46:04Z
================================================
� Commit: 356670cfeb29827cc139b0c905e83bfb3518ee02
� Branch: main
� Autor: Wibson82
� Ambiente: staging

� Status dos Jobs:
- Detecção de Mudanças: ✅
- Validação: ✅
- Segurança: ✅
- Backup: ✅
- Deploy: ✅

� Pipeline executado com sucesso!

� Links úteis:
- Workflow: https://github.com/Wibson82/conexao-traefik-infrastructure/actions/runs/17014721118
- Commit: https://github.com/Wibson82/conexao-traefik-infrastructure/commit/356670cfeb29827cc139b0c905e83bfb3518ee02
0s
Cleaning up orphan processes